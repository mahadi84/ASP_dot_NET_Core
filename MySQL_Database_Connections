

## ЁЯТ╗ MySQL ржХрзЗ ASP.NET Core MVC-ржП ржпрзБржХрзНржд ржХрж░рж╛рж░ ржзрж╛ржкрж╕ржорзВрж╣

**Entity Framework Core (EF Core)

**check installed packages version CMD: 
dotnet list package 
OR
dotnet list package --include-transitive

### рзз. ржкрзНрж░рж╛ржержорж┐ржХ ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзЗржЯржЖржк (Initial Project Setup)
          CMD in project folder:
            dotnet new mvc -n MyMvcApp   Optional(-f net9.0)
            cd MyMvcApp
                dotnet run      **(ржкрзНрж░рзЯрзЛржЬржирзЗ restore+build) + ржЕржмрж╢рзЗрж╖рзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржЪрж╛рж▓рж╛ржирзЛ
                dotnet restore  ** ржирждрзБржи ржкрзНржпрж╛ржХрзЗржЬ ржЕрзНржпрж╛ржб ржХрж░рж▓рзЗ ржмрж╛ ржкрзБрж░ржирзЛржЯрж╛ ржЖржкржбрзЗржЯ ржХрж░рж▓рзЗ dotnet restore ржжрж┐рж▓рзЗ рж╕ржм ржарж┐ржХржорждрзЛ ржЖржкржбрзЗржЯ рж╣рзЯред ** ржмрж╛ржЬрж╛рж░ ржХрж░рзЗ ржЖржирж╛,
                dotnet build    ** рждрж╛рж░ржкрж░ рж╕рзЗржЗ ржкрзНржпрж╛ржХрзЗржЬржЧрзБрж▓рзЛ ржирж┐рзЯрзЗ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж╛ рж╕ржлрж▓ржнрж╛ржмрзЗ ржХржорзНржкрж╛ржЗрж▓ рж╣рзЯ ржХрж┐ржирж╛ ржжрзЗржЦрзЗ ржирж╛ржУ (build) **рж░рж╛ржирзНржирж╛ ржХрж░рзЗ ржЦрж╛ржмрж╛рж░ ржмрж╛ржирж╛ржирзЛред

### рзи. ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ NuGet ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ (Install Required NuGet Packages) 

** .NET CLI:(
View>Terminal  
Select:Developer Command Prompt)
dotnet add package Pomelo.EntityFrameworkCore.MySql   --version 9.0.0   **MySQL ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ EF Core ржкрзНрж░рзЛржнрж╛ржЗржбрж╛рж░ред ржПржЗ ржкрзНржпрж╛ржХрзЗржЬржЯрж┐ MySQL-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рзЗред  
dotnet add package Microsoft.EntityFrameworkCore.Tools --version 9.0.0  **EF Core ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи ржПржмржВ ржЕржирзНржпрж╛ржирзНржп ржХржорж╛ржирзНржб ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржпред

OR

**Tools>NetGut Package Manager> Package Manager Console
   Install-Package Pomelo.EntityFrameworkCore.MySql      **MySQL ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ EF Core ржкрзНрж░рзЛржнрж╛ржЗржбрж╛рж░ред ржПржЗ ржкрзНржпрж╛ржХрзЗржЬржЯрж┐ MySQL-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рзЗред                        
   Install-Package Microsoft.EntityFrameworkCore.Tools   **EF Core ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи ржПржмржВ ржЕржирзНржпрж╛ржирзНржп ржХржорж╛ржирзНржб ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржпред                     
                         
### рзй. ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВ рж╕рзЗржЯржЖржк (Setup Connection String)
         -appsettings.json` ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБрж▓рзБржи ржПржмржВ `ConnectionStrings` рж╕рзЗржХрж╢ржи ржпрзЛржЧ ржХрж░рзБржи:
            {
              "ConnectionStrings": {
                "DefaultConnection": "Server=localhost;Port=3306;Database=YourDatabaseName;User=YourUsername;Password=YourPassword;"
              },
              // ржЕржирзНржпрж╛ржирзНржп рж╕рзЗржЯрж┐ржВрж╕...
            }

### рзк. ржоржбрзЗрж▓ ржПржмржВ DbContext рждрзИрж░рж┐ ржХрж░рж╛ (Create Model and DbContext)
### рзл. ржкрж░рж┐рж╖рзЗржмрж╛ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (Service Configuration)
          using YourProjectName.Data; // ржЖржкржирж╛рж░ DbContext namespace
          using Microsoft.EntityFrameworkCore;
          var connectionString = builder.Configuration.GetConnectionString("DefaultConnection");
          // MySQL ржкрзНрж░рзЛржнрж╛ржЗржбрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рзБржи
          builder.Services.AddDbContext<ApplicationDbContext>(
               options => options.UseMySql( connectionString, ServerVersion.AutoDetect(connectionString) // MySQL рж╕рж╛рж░рзНржнрж╛рж░ ржнрж╛рж░рзНрж╕ржи ржЕржЯрзЛ-ржбрж┐ржЯрзЗржХрзНржЯ ржХрж░ржмрзЗ
              )
          );
### рзм. ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи рждрзИрж░рж┐ ржУ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ (Create and Apply Migrations)
     Add-Migration InitialCreate  **ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи рждрзИрж░рж┐: ржПржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕рзНржХрж┐ржорж╛ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░ржмрзЗред
     Update-Database   **ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЖржкржбрзЗржЯ: ржПржЯрж┐ ржЖржкржирж╛рж░ MySQL ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐ ржХрж░ржмрзЗред
    **ржпржжрж┐ ржПржЯрж┐ рж╕ржлрж▓ржнрж╛ржмрзЗ ржЪрж▓рзЗ, рждржмрзЗ ржЖржкржирж╛рж░ `Item` ржЯрзЗржмрж┐рж▓ржЯрж┐ MySQL ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ рждрзИрж░рж┐ рж╣ржпрж╝рзЗ ржпрж╛ржмрзЗред

### рзн. MVC ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░рзЗ ржмрзНржпржмрж╣рж╛рж░ (Use in MVC Controller)
       using YourProjectName.Data;  **add line to controller
        

###################################### Details #############################

ржПржЗ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржЯрж┐ржХрзЗ рждрж┐ржиржЯрж┐ ржкрзНрж░ржзрж╛ржи ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ: ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзЗржЯржЖржк, NuGet ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓рзЗрж╢ржи ржПржмржВ EF Core ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржУ ржмрзНржпржмрж╣рж╛рж░ред

### рзз. ржкрзНрж░рж╛ржержорж┐ржХ ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзЗржЯржЖржк (Initial Project Setup)
ржкрзНрж░ржержорзЗржЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ ржЖржкржирж┐ ржПржХржЯрж┐ ASP.NET Core MVC ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗржи (Visual Studio ржмрж╛ CLI ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)ред

### рзи. ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ NuGet ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ (Install Required NuGet Packages)
MySQL-ржПрж░ рж╕рж╛ржерзЗ EF Core-ржХрзЗ ржпрзБржХрзНржд ржХрж░рж╛рж░ ржЬржирзНржп ржЖржкржирж╛рж░ ржмрж┐рж╢рзЗрж╖ ржХрж╛ржирзЗржХрзНржЯрж░ ржкрзНржпрж╛ржХрзЗржЬ рж▓рж╛ржЧржмрзЗред

### рзй. ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВ рж╕рзЗржЯржЖржк (Setup Connection String)
ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ ржпрж╛рждрзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржЕржмрж╕рзНржерж╛ржи ржЬрж╛ржирждрзЗ ржкрж╛рж░рзЗ, рждрж╛рж░ ржЬржирзНржп `appsettings.json` ржлрж╛ржЗрж▓рзЗ ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВ ржпрзЛржЧ ржХрж░рзБржиред

### рзк. ржоржбрзЗрж▓ ржПржмржВ DbContext рждрзИрж░рж┐ ржХрж░рж╛ (Create Model and DbContext)

#### ржХ. ржоржбрзЗрж▓ ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рж╛ (Model Class)
            ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ ржкрзНрж░рждрж┐ржирж┐ржзрж┐рждрзНржм ржХрж░рж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг C# ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рзБржиред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, `Models` ржлрзЛрж▓рзНржбрж╛рж░рзЗ `Item.cs` рждрзИрж░рж┐ ржХрж░рзБржи:
            namespace YourProjectName.Models
            {
                public class Item
                {
                    public int id { get; set; } // Primary Key
                    public string name { get; set; }
                    public decimal price { get; set; }
                }
            }


#### ржЦ. DbContext ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рж╛ (DbContext Class)
         EF Core-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ ржПржмржВ ржоржбрзЗрж▓ржЧрзБрж▓рж┐ржХрзЗ ржкрж░рж┐ржЪрж╛рж▓ржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рзБржиред ржпрзЗржоржи, `Data` ржлрзЛрж▓рзНржбрж╛рж░рзЗ `ApplicationDbContext.cs`:
         
         using Microsoft.EntityFrameworkCore;
         using YourProjectName.Models;
         
         namespace YourProjectName.Data
         {
             public class ApplicationDbContext : DbContext
             {
                 public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options) : base(options){ }
         
                 // DbContext-ржП ржЖржкржирж╛рж░ ржЯрзЗржмрж┐рж▓/ржоржбрзЗрж▓ ржпрзЛржЧ ржХрж░рзБржи
                 public DbSet<Item> Items { get; set; }
             }
         }


### рзл. ржкрж░рж┐рж╖рзЗржмрж╛ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (Service Configuration) At Route(Program.cs)
ржПржЦржи `Program.cs` ржлрж╛ржЗрж▓рзЗ EF Core ржПржмржВ MySQL ржкрзНрж░рзЛржнрж╛ржЗржбрж╛рж░ржХрзЗ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржкрж░рж┐рж╖рзЗржмрж╛ рж╣рж┐рж╕рзЗржмрзЗ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рзБржиред
`Program.cs` ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБрж▓рзБржи ржПржмржВ `var builder = WebApplication.CreateBuilder(args);` рж▓рж╛ржЗржирзЗрж░ ржкрж░рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

### рзм. ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи рждрзИрж░рж┐ ржУ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ (Create and Apply Migrations)
ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐ ржХрж░рждрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржбржЧрзБрж▓рж┐ PMC (ржкрзНржпрж╛ржХрзЗржЬ ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржХржирж╕рзЛрж▓) ржП ржЪрж╛рж▓рж╛ржи:

### рзн. MVC ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░рзЗ ржмрзНржпржмрж╣рж╛рж░ (Use in MVC Controller)
рж╕ржмрж╢рзЗрж╖рзЗ, ржЖржкржирж╛рж░ MVC ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░рзЗ `ApplicationDbContext` ржЗржиржЬрзЗржХрзНржЯ (Inject) ржХрж░рзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕рж╛ржерзЗ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрзНржЯ ржХрж░рзБржиред

ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, `HomeController.cs`-ржП:
using Microsoft.AspNetCore.Mvc;
using YourProjectName.Data;
using System.Linq;

public class HomeController : Controller
{
    private readonly ApplicationDbContext _context;

    public HomeController(ApplicationDbContext context) // Dependency Injection //Constructor
    {
        _context = context;
    }

    public IActionResult Index()
    {
        // ржбрж╛ржЯрж╛ржмрзЗрж╕ ржерзЗржХрзЗ рж╕ржХрж▓ Item рж▓рзЛржб ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ
        var items = _context.Items.ToList();         
        return View(items);
    }
}







.
