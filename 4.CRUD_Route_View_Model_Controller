
What is CLASS, constructor, New?

üß† Analogy (‡¶∏‡¶π‡¶ú ‡¶â‡¶™‡¶Æ‡¶æ)
class = ‡¶¨‡¶æ‡ßú‡¶ø‡¶∞ ‡¶®‡¶ï‡¶∂‡¶æ
constructor = ‡¶¶‡¶∞‡¶ú‡¶æ
new = ‡¶¨‡¶æ‡ßú‡¶ø ‡¶¨‡¶æ‡¶®‡¶æ‡¶®‡ßã
üëâ ‡¶®‡¶ï‡¶∂‡¶æ‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶¨‡¶∏‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶¨‡¶æ‡ßú‡¶ø ‡¶¨‡¶æ‡¶®‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡ßü ‡¶®‡¶æ üòÑ



###################### CRUD ###################

CREAT:
context.Students.Add(newStudent);
await context.SaveChangesAsync(); // ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£

READ:
var allStudents = await context.Students.ToListAsync(); 
var student = await context.Students.FirstOrDefaultAsync(s => s.Id == 1);

UPDATE:
var studentToUpdate = await context.Students.FindAsync(1);
if (studentToUpdate != null)
{
    studentToUpdate.Name = "New Name";
    await context.SaveChangesAsync(); // ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
}

DELETE:
var studentToDelete = await context.Students.FindAsync(1);
if (studentToDelete != null)
{
    context.Students.Remove(studentToDelete);
    await context.SaveChangesAsync(); // ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ
}

## üîç Find() ‡¶¨‡¶®‡¶æ‡¶Æ FirstOrDefault() ‡¶è‡¶∞ ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø

| ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø                       |      `Find()` ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø (Entity Framework Core-‡¶è)                                    |    `FirstOrDefault()` ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø (LINQ-‡¶è‡¶∞ ‡¶Ö‡¶Ç‡¶∂) |
| :------------------------   | :-------------------------------------------------------------------------------- | :----------------------------------------------- |
| ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶¨‡¶¶‡ßç‡¶ß‡¶§‡¶æ           | ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶ï‡ßÄ ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§ ‡¶ú‡¶ü‡¶ø‡¶≤ ‡¶∂‡¶∞‡ßç‡¶§ ‡¶¨‡¶æ `Include` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü ‡¶®‡¶æ‡•§          | ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡ßç‡¶°‡¶ø‡¶∂‡¶® (Where Clause) ‡¶è‡¶¨‡¶Ç `Include` ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§ ex: name,email,age etc.
| ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶π‡¶ø‡¶ü                 | ‡¶∂‡¶∞‡ßç‡¶§ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶π‡¶≤‡ßá ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶ï‡ßã‡ßü‡ßá‡¶∞‡¶ø ‡¶®‡¶æ‡¶ì ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá (No DB Hit)‡•§                           | ‡¶™‡ßç‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∏‡¶∞‡ßç‡¶¨‡¶¶‡¶æ ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶ï‡ßã‡ßü‡ßá‡¶∞‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡ßü (DB Hit)‡•§ |
| ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ                  | ‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶®‡¶æ ‡¶™‡¶æ‡ßü, ‡¶§‡¶æ‡¶π‡¶≤‡ßá `null` ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ï‡¶∞‡ßá (‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)‡•§         | ‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶®‡¶æ ‡¶™‡¶æ‡ßü, ‡¶§‡¶æ‡¶π‡¶≤‡ßá `default(T)` ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ï‡¶∞‡ßá (‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø `null`)‡•§ |

| ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞                | ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ `List<T>` ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá‡¶∞ ‡¶Æ‡ßá‡¶•‡¶°‡•§ EF Core-‡¶è ‡¶è‡¶ü‡¶ø `DbSet<T>` ‡¶è‡¶∞ ‡¶Æ‡ßá‡¶•‡¶°‡•§                 | `IEnumerable<T>` ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶´‡ßá‡¶∏‡ßá‡¶∞ ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶®‡¶∂‡¶® ‡¶Æ‡ßá‡¶•‡¶°, ‡¶Ø‡¶æ LINQ (Language Integrated Query)-‡¶è‡¶∞ ‡¶Ö‡¶Ç‡¶∂‡•§ |
| ‡¶Ü‡¶∞‡ßç‡¶ó‡ßÅ‡¶Æ‡ßá‡¶®‡ßç‡¶ü (Argument)         | EF Core-‡¶è ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶ï‡ßÄ (Primary Key) ‡¶¨‡¶æ ‡¶ï‡¶Æ‡ßç‡¶™‡ßã‡¶ú‡¶ø‡¶ü ‡¶ï‡ßÄ-‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶® (Value) ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßá‡•§ | ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ï‡ßá‡¶ü (Predicate) ‡¶¨‡¶æ ‡¶∂‡¶∞‡ßç‡¶§ (`s => s.Id == 1`) ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡ßá‡•§ |
| EF Core ‡¶Ü‡¶ö‡¶∞‡¶£ (Tracking)   | ‡¶è‡¶ü‡¶ø‡¶á ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶¨‡ßú ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø: ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶è‡¶ü‡¶ø EF Core-‡¶è‡¶∞ ‡¶ö‡ßá‡¶û‡ßç‡¶ú ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ (Change Tracker) ‡¶¨‡¶æ ‡¶Æ‡ßá‡¶Æ‡¶∞‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂‡ßá ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶ï‡¶∞‡ßá‡•§ ‡¶Ø‡¶¶‡¶ø ‡¶∏‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶è‡¶®‡ßç‡¶ü‡¶ø‡¶ü‡¶ø ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶®‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü, ‡¶§‡¶¨‡ßá‡¶á ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶ï‡ßã‡ßü‡ßá‡¶∞‡¶ø (Query) ‡¶™‡¶æ‡¶†‡¶æ‡ßü‡•§ | ‡¶è‡¶ü‡¶ø ‡¶∏‡¶¨‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶ï‡ßã‡ßü‡ßá‡¶∞‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡ßü (Unless the Query is against an in-memory collection)‡•§ |





############ Controller ##############

[Authorize]            //‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶¨‡¶ø‡¶â‡¶ü (‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞‡¶ø‡¶ü‡¶ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶¨‡¶ø‡¶â‡¶ü)
[ValidateAntiForgeryToken]

[Route]                //‡¶∂‡ßÅ‡¶ß‡ßÅ URL ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶®‡•§ (‡¶Æ‡ßá‡¶•‡¶° ‡¶®‡¶ø‡¶∞‡¶™‡ßá‡¶ï‡ßç‡¶∑)
[Route("api/stock")]
[Route("{id:int}")]

[ApiController]

[HttpGet("{id:int}")]
[HttpGet]             //URL ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® + HTTP GET ‡¶Æ‡ßá‡¶•‡¶°‡•§ (‡¶Æ‡ßá‡¶•‡¶° ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü)
[HttpPost]
[HttpPut]
[HttpDelete]

public async Task<IActionResult> GetAll([FromQuery] QueryObject query){}   //‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶¨‡¶ø‡¶â‡¶ü ([FromQuery]): ‡¶Ö‡¶∞‡ßç‡¶•: "‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∞‡¶ø ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç (Query String) ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶æ‡¶ì‡•§" ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ URL: /api/stock?symbol=AAPL&limit=10
public async Task<IActionResult> Create([FromBody] CreateStockRequestDto stockDto){} //‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶¨‡¶ø‡¶â‡¶ü ([FromBody]):  ‡¶Ö‡¶∞‡ßç‡¶•: "HTTP ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶¨‡¶°‡¶ø (Body) ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶æ‡¶ì‡•§" ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: JSON/XML ‡¶¨‡¶°‡¶ø‡¶§‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º, ‡¶Ø‡¶æ ‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º C# ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá‡•§ 
public async Task<IActionResult> GetById([FromRoute] int id){}            //‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ü‡ßç‡¶∞‡¶ø‡¶¨‡¶ø‡¶â‡¶ü ([FromRoute]):   ‡¶Ö‡¶∞‡ßç‡¶•: "‡¶∞‡ßÅ‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ (Route Parameter) ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶æ‡¶ì‡•§" ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ URL: /api/stock/5
public async Task<IActionResult> Update([FromRoute] int id, [FromBody] UpdateStockRequestDto updateDto){}


----------

using CRUD.Data;
using CRUD.Models;
using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using System.Diagnostics;

namespace CRUD.Controllers;

public class HomeController : Controller
{
    private readonly ApplicationDbContext _context;

    public HomeController(ApplicationDbContext context){ // Dependency Injection
        _context = context;
    }


public IActionResult Index(){
    return View();
}

    public IActionResult Employees(){
        var emp = _context.employees.ToList();
        return View(emp);   //return Json(c);
    }



//------------------------ Show All User  -----------------------------------
    public IActionResult User(){
        var u = _context.user.ToList();
        return View(u);   //return Json(c);
    }


//----------------------------------- ADD User  -----------------------------------

    [HttpGet] // Optional, but good practice to specify it only handles GET requests
    public IActionResult CreateUserForm()
    {        
        return View(); // Searches for Views/Home/Create.cshtml
    }



    // POST: /Home/Create - Handles the form submission
    [HttpPost]
    [ValidateAntiForgeryToken]
    public async Task<IActionResult> CreateUser(User user)
    {
        if (ModelState.IsValid)
        {
            try
            {
                _context.user.Add(user);
                await _context.SaveChangesAsync();

                TempData["SuccessMessage"] = "User created successfull!";  // ‡¶∏‡¶´‡¶≤ ‡¶π‡¶≤‡ßá
                return RedirectToAction("CreateUserForm");
            }
            catch (Microsoft.EntityFrameworkCore.DbUpdateException ex)  // DbUpdateException ‡¶ß‡¶∞‡ßá (Catch) ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
            {
                var innerException = ex.InnerException; // Inner Exception ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ

                // MySQL ‡¶™‡ßç‡¶∞‡ßã‡¶≠‡¶æ‡¶á‡¶°‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá Inner Exception‡¶ü‡¶ø MySqlException ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶§‡ßÅ‡¶≤‡ßç‡¶Ø ‡¶π‡¶¨‡ßá‡•§
                // MySqlConnector ‡¶¨‡¶æ MySQL.Data ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶è‡¶∞‡¶∞ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§
                // MySql-‡¶è‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡ßÅ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶ü ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶è‡¶∞‡¶∞ ‡¶ï‡ßã‡¶° (Error Code 1062)
                if (innerException != null && innerException.Message.Contains("Duplicate entry") && innerException.Message.Contains("for key"))
                {
                    TempData["ErrorMessage"] = "Role already exist";  // ‡¶°‡ßÅ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶ü ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ
                    ModelState.AddModelError(string.Empty, "Role already exist");  // ‡¶Æ‡¶°‡ßá‡¶≤ ‡¶∏‡ßç‡¶ü‡ßá‡¶ü-‡¶è‡¶ì ‡¶è‡¶∞‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶≠‡¶æ‡¶≤‡ßã
                }
                else
                {
                    TempData["ErrorMessage"] = "Database error during creation."; // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶è‡¶∞‡¶∞
                }
            }
            catch (Exception ex)
            {               
                Console.WriteLine($"Database error during creation: {ex.Message}");  // ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶∏‡¶¨ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶è‡¶∞‡¶∞
                TempData["ErrorMessage"] = "User created failed!";
            }
        }
        return View("CreateUserForm", user); // ‡¶Æ‡¶°‡ßá‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶° ‡¶®‡¶æ ‡¶π‡¶≤‡ßá ‡¶¨‡¶æ ‡¶è‡¶∞‡¶∞ ‡¶π‡¶≤‡ßá, ‡¶≠‡¶ø‡¶â‡¶§‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ
    }





    //----------------------------------- EDIT User  -----------------------------------
    [HttpGet]
    public async Task<IActionResult> Edit(int? id)
    {
        if (id == null)
        {
            return NotFound(); // Return 404 if no ID is provided
        }

        // 1. Fetch the existing user from the database
        var userToEdit = await _context.user.FindAsync(id);

        if (userToEdit == null)
        {
            return NotFound(); // Return 404 if user ID is not found
        }

        // 2. Pass the fetched user object to the View
        return View(userToEdit);
    }




    // --- POST ACTION: Handle Form Submission and Save Changes ---
    [HttpPost]
    [ValidateAntiForgeryToken]
    public async Task<IActionResult> Edit(int id, User user)
    {
        // Check if the ID from the route matches the ID in the form data
        if (id != user.id)
        {
            return NotFound();
        }

        if (ModelState.IsValid)
        {
            try
            {
                // 1. Tell EF Core that the user object has been modified
                _context.Update(user);

                // 2. Execute the UPDATE SQL command in the database
                await _context.SaveChangesAsync();

                // Set Success message using TempData
                TempData["SuccessMessage"] = "User details updated successfully!"; // SUCCESS MESSAGE

                // 3. Redirect back to the list page
                return RedirectToAction("Edit", new { id = user.id });
            }
            catch (DbUpdateConcurrencyException)
            {
                // Handle concurrency error
                if (!_context.user.Any(e => e.id == user.id))
                {
                    return NotFound();
                }
                else
                {
                    throw;
                }
            }
            catch (Microsoft.EntityFrameworkCore.DbUpdateException ex)
            {
                // Handle MySQL Duplicate Entry Error (Error Code 1062 often shows up in the message for MySqlConnector)
                var innerException = ex.InnerException;

                if (innerException != null && innerException.Message.Contains("Duplicate entry") && innerException.Message.Contains("for key"))
                {
                    // Set Duplicate Entry Error Message
                    TempData["ErrorMessage"] = "The data entered already exists. Duplicate entry is not allowed."; // ERROR MESSAGE
                    ModelState.AddModelError(string.Empty, "The data entered is already in use. Please use a different value."); // MODEL ERROR
                }
                else
                {
                    // General Database Error Message
                    TempData["ErrorMessage"] = "An unexpected error occurred while saving data."; // ERROR MESSAGE
                    ModelState.AddModelError(string.Empty, "An unknown error occurred during the update process."); // MODEL ERROR
                }
            }
            
        }

        // If validation fails or an error occurs, return the form with the user's input
        return View("Edit", user);
    }



    //----------------------------------- DELETE User  -----------------------------------
    // The DeleteConfirmed method handles the POST request to delete a user record.
    [HttpPost]
    [ValidateAntiForgeryToken]
    public async Task<IActionResult> DeleteConfirmed(int id)
    {
        // Find the user to be deleted based on the ID.
        var user = await _context.user.FindAsync(id);

        // 1. EXISTENCE VALIDATION: Check if the user exists.
        if (user == null)
        {
            // If the user is not found (perhaps already deleted), return 404.
            return NotFound();
        }

        try
        {
            // 2. Remove the user object from the tracking list
            _context.user.Remove(user);

            // 3. Execute the DELETE SQL command
            await _context.SaveChangesAsync();

            // 4. Return success status (204 No Content is standard for successful AJAX deletion)
            return NoContent();
        }
        catch (Exception ex)
        {
            // Log the error (in a real app, use ILogger.LogError)
            Console.WriteLine($"Database error during deletion: {ex.Message}");

            // Return a 500 Internal Server Error status with the error message
            return StatusCode(500, "Error deleting the user: " + ex.Message);
        }
    }




[ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)]
public IActionResult Error(){
    return View(new ErrorViewModel { RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier });
}

}



############## Route(Program.cs) ##############
app.MapControllerRoute(name:"Test",  pattern: "{controller=Test}/{action=ShowAll}" );



############ View ##############

## Menu:   

<a> href="@Url.Action("Index", "Home")">Home</a>

01. <a asp-route="Product1">Home</a> 
Note: Using asp-route="AllProducts" is the best practice.

02.<a
asp-area=""
asp-controller="Product1"    //Directs the request to the Product1Controller.
asp-action="ShowAll"         //Directs the request to the ShowAll() method within the ProductController.
>Home</a>

-----------------
@{
    ViewData["Title"] = "Home Page";
}
        @model string
        @Model 

            <h1>@ViewBag.message</h1>
                <h1>@ViewBag[message]</h1>

 @* The form points to the POST version of the Create action *@
 <form asp-action="CreateUser" asp-controller="Home" method="post">
     
     @Html.AntiForgeryToken()  @* Important for security against Cross-Site Request Forgery (CSRF) *@

     <div class="form-group">
         <label asp-for="name" class="control-label"></label>
         <input asp-for="name" class="form-control" />
         <span asp-validation-for="name" class="text-danger"></span>
     </div>    

     <div class="form-group mt-4">
         <input type="submit" value="Create" class="btn btn-success" />
         <a asp-action="User" class="btn btn-secondary ml-2">Back to List</a>
     </div>
 </form>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}



############ Model ##############

Model ‡¶ï‡ßÄ?
Model ‡¶π‡¶≤‡ßã ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶∏‡ßá‡¶á ‡¶Ö‡¶Ç‡¶∂ ‡¶Ø‡¶æ
üëâ ‡¶°‡ßá‡¶ü‡¶æ ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá / data container
üëâ ‡¶°‡ßá‡¶ü‡¶æ‡¶∞ ‡¶®‡¶ø‡ßü‡¶Æ (validation) ‡¶ß‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßá / data validation container
üëâ Business logic-‡¶è‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá

‡¶∏‡¶π‡¶ú‡¶≠‡¶æ‡¶¨‡ßá: Model = Data + Rules

Business Logic-‡¶è‡¶∞ ‡¶Ö‡¶Ç‡¶∂ ‡¶π‡ßü:
	Clean Architecture ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ,
		-ViewModel ‚Üí input/output
		-Domain Model ‚Üí ‡¶Ü‡¶∏‡¶≤ business rules



[Required(ErrorMessage = "Username is required.")]
[StringLength(100, MinimumLength = 6, ErrorMessage = "Password must be at least 6 characters long.")]




namespace test.Models
{
    public class LoginModel
    {
        [Required(ErrorMessage = "Username is required.")]
        public string Username { get; set; }

        [Required(ErrorMessage = "Password is required.")]
        [StringLength(100, MinimumLength = 6, ErrorMessage = "Password must be at least 6 characters long.")]
        public string Password { get; set; }

    }
}




.
