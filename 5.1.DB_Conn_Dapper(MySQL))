

### 1. Packages:

dotnet add package Dapper
dotnet add package MySqlConnector


### 2. Connection String (appsettings.json)

{
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=MyDb;User=root;Password=your_password;"
  }
}

### 3. Route Configuration (Program.cs)
.NET 9- Dependency Injection:


var builder = WebApplication.CreateBuilder(args);

// কানেকশন স্ট্রিংটি রিড করা
var connectionString = builder.Configuration.GetConnectionString("DefaultConnection");

// MySqlDataSource ব্যবহার করা .NET 8/9 এর জন্য সবচেয়ে আধুনিক এবং পারফরম্যান্ট উপায়
builder.Services.AddMySqlDataSource(connectionString);




### 4. Use of Dapper

using Dapper;           // Dapper অবশ্যই ইমপোর্ট করতে হবে
using MySqlConnector;   // MySqlDataSource এর জন্য

public class BranchService
{
    private readonly MySqlDataSource _dataSource; // DataSource ইনজেক্ট করা হয়েছে

    // কনস্ট্রাক্টরে MySqlDataSource যুক্ত করা হয়েছে
    public BranchService(MySqlDataSource dataSource)
    {
        _dataSource = dataSource;
    }

    public async Task<Result<int>> CreateBranchAsyn(BranchCreateDTO bdto, int UserID)
    {
        // ১. Dapper ব্যবহার করে Branch Code চেক করা
        const string sql = "SELECT COUNT(1) FROM Branches WHERE BranchCode = @BranchCode";
        
        //Open database connection as we use "using var" no need to close it
        using var connection = await _dataSource.OpenConnectionAsync();
        
        // ExecuteScalarAsync দিয়ে খুব দ্রুত রেজাল্ট আনা যায়
        var count = await connection.ExecuteScalarAsync<int>(sql, new { BranchCode = bdto.BranchCode });

        if (count > 0)  { return Result<int>.Failure("Branch code already exists"); }

    }

}


#####################################################
                What and Why?
#####################################################

মেথড,কখন ব্যবহার করবেন?,উদাহরণ

ExecuteScalarAsync-------শুধু একটি ভ্যালুর জন্য।----------------------SELECT COUNT(*), SELECT MAX(Price)
QueryAsync--------------একাধিক রো বা লিস্টের জন্য।-------------------SELECT * FROM Branches
QuerySingleAsync--------ঠিক একটি রো আসবে নিশ্চিত হলে।-------------SELECT * FROM Branches WHERE Id = 5
ExecuteAsync,-----------"ডাটা ইনসার্ট, আপডেট বা ডিলিট করতে।"-------,UPDATE Branches SET Name = @Name
===================================================== 
   new MySqlConnection() vs MySqlDataSource
===================================================== 

new MySqlConnection() FOR ছোট কোনো স্ক্রিপ্ট বা কনসোল অ্যাপ। (পদ্ধতি: প্রতিবার নতুন করে তৈরি করা হয়। ব্যবস্থাপনা:ডেভেলপারকে ম্যানুয়ালি ওপেন/ক্লোজ করতে হয়।)
MySqlDataSource  latest technology FOR প্রফেশনাল ASP.NET Core Web API বা Web App তৈরি করেন, তবে অবশ্যইব্যবহার করা উচিত। (পদ্ধতি: একবার কনফিগার করে বারবার ব্যবহার করা যায়। ব্যবস্থাপনা: সিস্টেম নিজে থেকেই কানেকশন ম্যানেজ করে।)







.

