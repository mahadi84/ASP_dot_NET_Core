


# 8) Bootstrap UI (Layout + Views)

## 8.1 Shared Layout

`src/OnlineBanking.Web/Views/Shared/_Layout.cshtml`

```html
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>@ViewData["Title"] - OnlineBanking</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="/">OnlineBanking</a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto">
        @if (User.Identity?.IsAuthenticated ?? false)
        {
          <li class="nav-item"><a class="nav-link" href="/Banking/Dashboard">Dashboard</a></li>
          @if (User.Claims.FirstOrDefault(c => c.Type == "IsAdmin")?.Value == "true")
          {
            <li class="nav-item"><a class="nav-link" href="/Admin/Customers">Admin</a></li>
            <li class="nav-item"><a class="nav-link" href="/Admin/Audit">Audit</a></li>
          }
        }
      </ul>

      <ul class="navbar-nav">
        @if (User.Identity?.IsAuthenticated ?? false)
        {
          <li class="nav-item">
            <form method="post" action="/Account/Logout">
              <button class="btn btn-sm btn-outline-light" type="submit">Logout</button>
            </form>
          </li>
        }
        else
        {
          <li class="nav-item"><a class="nav-link" href="/Account/Login">Login</a></li>
          <li class="nav-item"><a class="nav-link" href="/Account/Register">Register</a></li>
        }
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-4">
  @if (TempData["Msg"] != null)
  {
    <div class="alert alert-info">@TempData["Msg"]</div>
  }
  @RenderBody()
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
```

## 8.2 Account Views

`Views/Account/Register.cshtml`

```html
@model OnlineBanking.Web.Models.RegisterVm
@{ ViewData["Title"] = "Register"; }

<div class="row justify-content-center">
  <div class="col-md-6">
    <h3>Register</h3>
    <form method="post" class="card card-body">
      <div asp-validation-summary="All" class="text-danger"></div>

      <label class="form-label">Name</label>
      <input class="form-control" asp-for="Name" />

      <label class="form-label mt-2">Email</label>
      <input class="form-control" asp-for="Email" />

      <label class="form-label mt-2">City</label>
      <input class="form-control" asp-for="City" />

      <label class="form-label mt-2">Password</label>
      <input class="form-control" asp-for="Password" type="password" />

      <button class="btn btn-primary mt-3" type="submit">Register</button>
    </form>
  </div>
</div>
```

`Views/Account/RegisterSuccess.cshtml`

```html
@{ ViewData["Title"] = "Success"; }
<div class="alert alert-success">
  <h4>Registration Successful</h4>
  <p>Your 5-digit Account Number: <b>@ViewBag.AccountNumber</b></p>
  <p>Use this account number to login.</p>
</div>
<a class="btn btn-dark" href="/Account/Login">Go to Login</a>
```

`Views/Account/Login.cshtml`

```html
@model OnlineBanking.Web.Models.LoginVm
@{ ViewData["Title"] = "Login"; }

<div class="row justify-content-center">
  <div class="col-md-5">
    <h3>Login</h3>
    <form method="post" class="card card-body">
      <div asp-validation-summary="All" class="text-danger"></div>

      <label class="form-label">Account Number</label>
      <input class="form-control" asp-for="AccountNumber" />

      <label class="form-label mt-2">Password</label>
      <input class="form-control" asp-for="Password" type="password" />

      <button class="btn btn-primary mt-3" type="submit">Login</button>
      <a class="btn btn-link mt-2" href="/Account/Register">Create account</a>
    </form>
  </div>
</div>
```

## 8.3 Banking Dashboard view

`Views/Banking/Dashboard.cshtml`

```html
@{
  ViewData["Title"] = "Dashboard";
  var profile = ((string CustomerName, string AccountNumber, decimal Balance))ViewBag.Profile;
  var rules = ViewBag.Rules;
  var last10 = (IEnumerable<dynamic>)ViewBag.Last10;
}
<h3>Welcome, @profile.CustomerName</h3>

<div class="row">
  <div class="col-md-6">
    <div class="card card-body">
      <p><b>Account:</b> @profile.AccountNumber</p>
      <p><b>Balance:</b> @rules.CurrencySymbol@profile.Balance</p>
      <p class="text-muted mb-0">
        Min Balance: @rules.CurrencySymbol@rules.MinimumBalance |
        Daily Transfer Limit: @rules.CurrencySymbol@rules.DailyTransferLimit |
        TZ: @rules.TimeZoneId
      </p>
      <a class="btn btn-outline-dark mt-3" href="/Banking/MiniStatementPdf">Download Mini Statement (PDF)</a>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card card-body">
      <h5>Deposit</h5>
      <form method="post" action="/Banking/Deposit" class="d-flex gap-2">
        <input class="form-control" name="Amount" placeholder="Amount" />
        <button class="btn btn-success" type="submit">Deposit</button>
      </form>

      <h5 class="mt-4">Withdraw</h5>
      <form method="post" action="/Banking/Withdraw" class="d-flex gap-2">
        <input class="form-control" name="Amount" placeholder="Amount" />
        <button class="btn btn-warning" type="submit">Withdraw</button>
      </form>

      <h5 class="mt-4">Transfer</h5>
      <form method="post" action="/Banking/Transfer" class="row g-2">
        <div class="col-6"><input class="form-control" name="ToAccountNumber" placeholder="To (5-digit)" /></div>
        <div class="col-6"><input class="form-control" name="Amount" placeholder="Amount" /></div>
        <div class="col-12"><button class="btn btn-primary w-100" type="submit">Transfer</button></div>
      </form>
    </div>
  </div>
</div>

<div class="card card-body mt-4">
  <h5>Last 10 Transactions (UTC stored; PDF shows Dhaka time)</h5>
  <table class="table table-sm table-striped">
    <thead>
      <tr>
        <th>UTC Time</th><th>Type</th><th>Amount</th><th>Balance After</th><th>Reference</th>
      </tr>
    </thead>
    <tbody>
    @foreach (var t in last10)
    {
      <tr>
        <td>@t.CreatedAtUtc</td>
        <td>@t.Type</td>
        <td>@rules.CurrencySymbol@t.Amount</td>
        <td>@rules.CurrencySymbol@t.BalanceAfter</td>
        <td>@t.Reference</td>
      </tr>
    }
    </tbody>
  </table>
</div>
```

## 8.4 Admin views

`Views/Admin/Customers.cshtml`

```html
@model IEnumerable<OnlineBanking.Domain.Entities.Customer>
@{ ViewData["Title"] = "Admin - Customers"; }

<h3>Customers</h3>

<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th>Acc</th><th>Name</th><th>Email</th><th>City</th><th>Admin</th><th>LockedUntil(UTC)</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
  @foreach (var c in Model)
  {
    <tr>
      <td>@c.AccountNumber</td>
      <td>@c.Name</td>
      <td>@c.Email</td>
      <td>@c.City</td>
      <td>@c.IsAdmin</td>
      <td>@c.LockedUntilUtc</td>
      <td>
        <form method="post" action="/Admin/SetAdmin" class="d-inline">
          <input type="hidden" name="accountNumber" value="@c.AccountNumber" />
          <input type="hidden" name="isAdmin" value="@(c.IsAdmin ? "false" : "true")" />
          <button class="btn btn-sm btn-outline-primary" type="submit">
            @(c.IsAdmin ? "Remove Admin" : "Make Admin")
          </button>
        </form>

        <form method="post" action="/Admin/Lock" class="d-inline">
          <input type="hidden" name="accountNumber" value="@c.AccountNumber" />
          <input type="hidden" name="minutes" value="30" />
          <button class="btn btn-sm btn-outline-warning" type="submit">Lock 30m</button>
        </form>

        <form method="post" action="/Admin/Unlock" class="d-inline">
          <input type="hidden" name="accountNumber" value="@c.AccountNumber" />
          <button class="btn btn-sm btn-outline-success" type="submit">Unlock</button>
        </form>
      </td>
    </tr>
  }
  </tbody>
</table>

<a class="btn btn-dark" href="/Admin/ResetPassword">Reset User Password</a>
```

`Views/Admin/ResetPassword.cshtml`

```html
@model OnlineBanking.Web.Models.AdminResetPasswordVm
@{ ViewData["Title"] = "Admin - Reset Password"; }

<h3>Reset Password</h3>

<form method="post" class="card card-body col-md-6">
  <div asp-validation-summary="All" class="text-danger"></div>

  <label class="form-label">Account Number</label>
  <input class="form-control" asp-for="AccountNumber" />

  <label class="form-label mt-2">New Password</label>
  <input class="form-control" asp-for="NewPassword" />

  <button class="btn btn-primary mt-3" type="submit">Reset</button>
</form>
```

`Views/Admin/Audit.cshtml`

```html
@model IEnumerable<OnlineBanking.Domain.Entities.AuditLog>
@{ ViewData["Title"] = "Admin - Audit Logs"; }

<h3>Audit Logs (Latest)</h3>

<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th>UTC</th><th>Action</th><th>Actor</th><th>Target</th><th>IP</th><th>Message</th>
    </tr>
  </thead>
  <tbody>
  @foreach (var a in Model)
  {
    <tr>
      <td>@a.CreatedAtUtc</td>
      <td>@a.Action</td>
      <td>@a.ActorAccountNumber</td>
      <td>@a.TargetAccountNumber</td>
      <td>@a.Ip</td>
      <td>@a.Message</td>
    </tr>
  }
  </tbody>
</table>
```

---
