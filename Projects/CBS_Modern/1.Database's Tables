Date: 5 january 2026



### Total Number of Tables, their required fields


In total, I need 7 to 8 tables for the core structure of my banking application.

These tables are needed to ensure:
- User management and authentication.
- Transaction management with double entry accounting.
- Account management (both general and sub-ledgers).
- Security and audit trails.
- Ensuring financial consistency and reconciliation.





================================================================
              DATABASE 03 -Gl_by_button_press_by_admin
===============================================================

CREATE DATABASE CBS_MultiBranch;
USE CBS_MultiBranch;

-- ১. এই টেবিলে ব্যাংকের প্রতিটি শাখার মৌলিক তথ্য এবং প্রধান ভল্টের ব্যালেন্স সংরক্ষিত থাকে।
-- এটি হেড অফিসকে প্রতিটি শাখার নগদ টাকার প্রবাহ (Liquidity) পর্যবেক্ষণ করতে সাহায্য করে।
-- সিস্টেমের প্রতিটি লেনদেন বা ইউজারের সাথে একটি নির্দিষ্ট শাখার আইডি যুক্ত করার জন্য এটি প্রধান রেফারেন্স।
CREATE TABLE branches (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_code VARCHAR(10) UNIQUE NOT NULL,
    branch_name VARCHAR(100) NOT NULL,
    vault_balance DECIMAL(18, 2) DEFAULT 0.00,
    is_active BOOLEAN DEFAULT TRUE
);

-- ২. এখানে ব্যাংকের সকল কর্মকর্তাদের ইউজার আইডি, পাসওয়ার্ড এবং তাদের রোল (Role) সংরক্ষিত থাকে।
-- এটি নিশ্চিত করে যে শুধুমাত্র অনুমোদিত ইউজাররা নির্দিষ্ট শাখায় লগইন এবং লেনদেন করতে পারছেন।
-- সিকিউরিটি নিশ্চিত করতে ভুল লগইন এটেম্পট এবং অ্যাকাউন্ট লকিং সংক্রান্ত তথ্যও এখানে থাকে।
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role ENUM('Admin', 'Maker', 'Checker', 'Auditor') NOT NULL,
    branch_id INT NOT NULL,
    failed_attempts INT DEFAULT 0,
    lock_until TIMESTAMP NULL,
    is_locked BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE,
    last_login TIMESTAMP NULL,
    FOREIGN KEY (branch_id) REFERENCES branches(id)
);

-- ৩. এটি ব্যাংকের চার্ট অফ অ্যাকাউন্টস যেখানে প্রতিটি শাখার আলাদা জেনারেল লেজার (GL) ব্যালেন্স থাকে।
-- অ্যাডমিন যখন 'GL Now' ক্লিক করেন, তখন এই টেবিলের current_balance আপডেট হয়।
-- শাখা ভিত্তিক লাভ-ক্ষতি এবং ট্রায়াল ব্যালেন্স রিপোর্ট তৈরি করতে এই টেবিলটি ব্যবহৃত হয়।
CREATE TABLE gl_heads (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    gl_code INT NOT NULL, 
    gl_name VARCHAR(100) NOT NULL,
    gl_type ENUM('Asset', 'Liability', 'Equity', 'Income', 'Expense') NOT NULL,
    current_balance DECIMAL(18, 2) DEFAULT 0.00,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    UNIQUE KEY (branch_id, gl_code)
);

-- ৪. গ্রাহকের নাম, এনআইডি এবং কেওয়াইসি (KYC) সম্পর্কিত তথ্য এই টেবিলে সংরক্ষিত থাকে।
-- নতুন কাস্টমার এন্ট্রি করার পর মেকার অনুমোদন না করা পর্যন্ত তার স্ট্যাটাস 'Pending' থাকে।
-- গ্রাহকের বৈধতা নিশ্চিত করতে এবং আইনি পরিপালন (Compliance) বজায় রাখতে এই টেবিলটি প্রয়োজন।
CREATE TABLE customers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    nid_number VARCHAR(20) UNIQUE NOT NULL,
    status ENUM('Pending', 'Active', 'Rejected') DEFAULT 'Pending',
    created_by INT,
    approved_by INT,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- ৫. এটি গ্রাহকের সঞ্চয়ী বা চলতি অ্যাকাউন্টের বর্তমান ব্যালেন্স স্টোর করে।
-- মেকার এপ্রুভ করার সাথে সাথে এই টেবিলের balance আপডেট হয় যেন গ্রাহক টাকা ব্যবহার করতে পারেন।
-- এটি সাব-লেজারের সারসংক্ষেপ হিসেবে কাজ করে যা রিয়েল-টাইম ব্যাংকিং নিশ্চিত করে।
CREATE TABLE accounts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    customer_id INT NOT NULL,
    account_number VARCHAR(5) UNIQUE NOT NULL,
    account_type ENUM('111', '222') NOT NULL,
    balance DECIMAL(18, 2) DEFAULT 0.00,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (customer_id) REFERENCES customers(id)
);

-- ৬. প্রতিটি শাখার ক্যাশ কাউন্টারে থাকা নগদ টাকার তাৎক্ষণিক পরিমাণ এখানে রেকর্ড থাকে।
-- চেকার তার হাতে থাকা ক্যাশ লিমিটের বেশি লেনদেন করছেন কি না তা এখান থেকে চেক করা হয়।
-- দিনের শেষে ফিজিক্যাল ক্যাশ এবং এই টেবিলের ব্যালেন্স মিলিয়ে ক্যাশ-প্রুফ সম্পন্ন করা হয়।
CREATE TABLE cash_drawers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    checker_id INT UNIQUE,
    current_cash DECIMAL(18, 2) DEFAULT 0.00,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (checker_id) REFERENCES users(id)
);

-- ৭. এটি লেনদেনের মূল টেবিল যেখানে ট্রানজ্যাকশনের এপ্রুভাল এবং GL পোস্টিং স্ট্যাটাস থাকে।
-- 'is_gl_posted' কলামটি নিশ্চিত করে যে লেনদেনটি প্রধান লেজারে হিট করেছে কি না।
-- মেকার এপ্রুভ করলে এটি Approved হয় এবং অ্যাডমিন ক্লিক করলে is_gl_posted সত্য হয়।
CREATE TABLE transactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    batch_number VARCHAR(20) UNIQUE NOT NULL,
    account_id INT NOT NULL,
    instrument_type ENUM('Cash', 'Cheque') NOT NULL,
    instrument_number TEXT,
    txn_type ENUM('Deposit', 'Withdraw') NOT NULL,
    amount DECIMAL(18, 2) NOT NULL,
    status ENUM('Initiated', 'Approved', 'Rejected') DEFAULT 'Initiated',
    is_gl_posted BOOLEAN DEFAULT FALSE, 
    checker_id INT NOT NULL,
    maker_id INT,
    remarks TEXT,
    version_no INT DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (account_id) REFERENCES accounts(id),
    FOREIGN KEY (checker_id) REFERENCES users(id),
    FOREIGN KEY (maker_id) REFERENCES users(id)
);

-- ৮. এটি গ্রাহকের ব্যক্তিগত লেজার বা স্টেটমেন্ট তৈরির জন্য প্রতিটি লেনদেনের রেকর্ড রাখে।
-- মেকার এপ্রুভ করার সাথে সাথে এখানে একটি ডেবিট বা ক্রেডিট এন্ট্রি তৈরি করা হয়।
-- গ্রাহকের ঐতিহাসিক লেনদেন এবং চলমান ব্যালেন্স (Running Balance) এই টেবিল থেকে পাওয়া যায়।
CREATE TABLE sub_ledger_entries (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    txn_id INT NOT NULL,
    account_id INT NOT NULL,
    dr_cr_flag ENUM('Dr', 'Cr') NOT NULL,
    amount DECIMAL(18, 2) NOT NULL,
    running_balance DECIMAL(18, 2) NOT NULL,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (txn_id) REFERENCES transactions(id)
);

-- ৯. এটি জেনারেল লেজারের প্রতিটি ভাউচারের মাস্টার বা হেডার তথ্য ধারণ করে।
-- অ্যাডমিন 'Post GL' বাটনে ক্লিক করলে পেন্ডিং ট্রানজ্যাকশনের বিপরীতে এখানে এন্ট্রি হয়।
-- প্রতিটি জার্নালের মোট ডেবিট এবং ক্রেডিট ব্যালেন্স সমান কি না তা এখান থেকে নিশ্চিত হওয়া যায়।
CREATE TABLE gl_journals (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    txn_id INT NOT NULL,
    branch_id INT NOT NULL,
    total_debit DECIMAL(18, 2),
    total_credit DECIMAL(18, 2),
    narration TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (txn_id) REFERENCES transactions(id),
    FOREIGN KEY (branch_id) REFERENCES branches(id)
);

-- ১০. এটি ডাবল-এন্ট্রি অ্যাকাউন্টিং সিস্টেমের মূল টেবিল যেখানে প্রতিটি GL কোডের ডাটা থাকে।
-- এখানে প্রতিটি লেনদেনের দুটি পক্ষ (যেমন: ক্যাশ ডেবিট এবং ডিপোজিট ক্রেডিট) ইনসার্ট হয়।
-- ফাইনান্সিয়াল রিপোর্ট এবং ট্রায়াল ব্যালেন্সের জন্য এটিই তথ্যের প্রধান উৎস।
CREATE TABLE gl_journal_lines (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    txn_id INT NOT NULL,
    gl_code_id INT NOT NULL, 
    debit_amount DECIMAL(18, 2) DEFAULT 0.00,
    credit_amount DECIMAL(18, 2) DEFAULT 0.00,
    narration TEXT,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (gl_code_id) REFERENCES gl_heads(id)
);

-- ১১. এটি সাব-লেজার (SL) এবং জেনারেল লেজার (GL) ব্যালেন্সের মধ্যে গরমিল চেক করার জন্য ব্যবহৃত হয়।
-- অডিটররা এখান থেকে দেখতে পারেন কোনো শাখার হিসেবে কোনো অমিল বা ডিফারেন্স আছে কি না।
-- সিস্টেম চেক করার পর কোনো হিসেবে অমিল পেলে এখানে 'Mismatch' স্ট্যাটাস রেকর্ড করা হয়।
CREATE TABLE reconciliation_logs (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    recon_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    gl_code INT NOT NULL,
    gl_balance DECIMAL(18, 2) NOT NULL,
    sl_total_balance DECIMAL(18, 2) NOT NULL,
    difference DECIMAL(18, 2) NOT NULL,
    status ENUM('Matched', 'Mismatch') NOT NULL,
    FOREIGN KEY (branch_id) REFERENCES branches(id)
);

-- ১২. সিস্টেমের প্রতিটি গুরুত্বপূর্ণ পরিবর্তনের ইতিহাস (আগের মান এবং পরের মান) এখানে থাকে।
-- এটি জালিয়াতি রোধ করতে এবং কোনো ভুল সংশোধনের জন্য অডিটরদের সাহায্য করে।
-- কে, কখন এবং কোন শাখা থেকে ডাটা পরিবর্তন করেছে তা এখান থেকে ট্র্যাক করা যায়।
CREATE TABLE audit_logs (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    user_id INT,
    action VARCHAR(100),
    old_value TEXT,
    new_value TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- ১৩. এটি গ্লোবাল সিস্টেম কন্ট্রোল টেবিল যা GL পোস্টিং প্রসেসের সময় নতুন কাজ লক করতে ব্যবহৃত হয়।
-- যখন অ্যাডমিন GL পোস্টিং চালান, তখন এটি অনাকাঙ্ক্ষিত নতুন ডাটা এন্ট্রি রোধ করে।
-- সর্বশেষ কবে দিনের হিসাব বন্ধ (EOD) করা হয়েছে সেই তারিখটিও এখানে সংরক্ষিত থাকে।
CREATE TABLE system_controls (
    id INT PRIMARY KEY,
    is_gl_posting_running BOOLEAN DEFAULT FALSE,
    last_eod_date DATE
);


-- উদাহরণস্বরূপ শাখা ১-এর জন্য GL তৈরি
INSERT INTO gl_heads (branch_id, gl_code, gl_name, gl_type) VALUES (1, 1001, 'Cash In Hand', 'Asset');
INSERT INTO gl_heads (branch_id, gl_code, gl_name, gl_type) VALUES (1, 2001, 'Customer Deposits', 'Liability');




========================================================
              DATABASE 02 -maker-approve-gl
========================================================

CREATE DATABASE CBS_MultiBranch;
USE CBS_MultiBranch;

-- ১. এই টেবিলে ব্যাংকের প্রতিটি শাখার নাম, ইউনিক কোড এবং সেই শাখার প্রধান ভল্টের ব্যালেন্স থাকে।
-- এটি হেড অফিসকে প্রতিটি শাখার লিকুইডিটি বা নগদ টাকার পরিমাণ মনিটর করতে সাহায্য করে।
-- শাখা ভিত্তিক আলাদা হিসাব বা রিপোর্টিং তৈরির জন্য এটিই প্রধান রেফারেন্স টেবিল।
CREATE TABLE branches (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_code VARCHAR(10) UNIQUE NOT NULL,
    branch_name VARCHAR(100) NOT NULL,
    vault_balance DECIMAL(18, 2) DEFAULT 0.00,
    is_active BOOLEAN DEFAULT TRUE
);

-- ২. ব্যাংকের কর্মকর্তা বা ইউজারদের তথ্য এবং তাদের নির্দিষ্ট শাখা (branch_id) এখানে সংরক্ষিত থাকে।
-- এটি নিশ্চিত করে যে একজন চেকার বা মেকার শুধুমাত্র তার নিজ শাখার কাস্টমার বা ট্রানজ্যাকশন দেখতে পাবেন।
-- ইউজারের পাসওয়ার্ড হাশ এবং সিস্টেম রোল (Admin/Checker/Maker/Auditor) এখান থেকেই নিয়ন্ত্রিত হয়।
-- লকিং এবং সিকিউরিটি ফিল্ডসমূহ
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role ENUM('Admin', 'Maker', 'Checker', 'Auditor') NOT NULL,
    branch_id INT NOT NULL,
    failed_attempts INT DEFAULT 0,          -- কতবার ভুল পাসওয়ার্ড দেওয়া হয়েছে
    lock_until TIMESTAMP NULL,              -- কত সময় পর্যন্ত লক থাকবে
    is_locked BOOLEAN DEFAULT FALSE,        -- অ্যাকাউন্টটি বর্তমানে লক করা কি না
    is_active BOOLEAN DEFAULT TRUE,
    last_login TIMESTAMP NULL,              -- শেষবার কখন লগইন করা হয়েছিল
    
    FOREIGN KEY (branch_id) REFERENCES branches(id)
);

-- ৩. এটি চার্ট অফ অ্যাকাউন্টস যেখানে প্রতিটি শাখার জন্য আলাদা জেনারেল লেজার (GL) হেড তৈরি করা থাকে।
-- একই লেজার কোড (যেমন: ১০০১) প্রতিটি শাখার জন্য আলাদা ব্যালেন্স মেইনটেইন করে।
-- এটি ট্রায়াল ব্যালেন্স এবং শাখা ভিত্তিক লাভ-ক্ষতির হিসাব জেনারেট করার মূল উৎস।
CREATE TABLE gl_heads (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    gl_code INT NOT NULL, 
    gl_name VARCHAR(100) NOT NULL,
    gl_type ENUM('Asset', 'Liability', 'Equity', 'Income', 'Expense') NOT NULL,
    current_balance DECIMAL(18, 2) DEFAULT 0.00,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    UNIQUE KEY (branch_id, gl_code)
);

-- ৪. গ্রাহকের ব্যক্তিগত তথ্য এবং তিনি কোন শাখায় অ্যাকাউন্ট খুলেছেন তার রেকর্ড এখানে থাকে।
-- নতুন গ্রাহক তৈরির পর মেকার অনুমোদন না করা পর্যন্ত এই রেকর্ডটি সিস্টেমে কার্যকর হয় না।
-- গ্রাহকের এনআইডি এবং স্ট্যাটাস (Pending/Active) ট্র্যাক করার মাধ্যমে কেওয়াইসি (KYC) নিশ্চিত করা হয়।
CREATE TABLE customers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    nid_number VARCHAR(20) UNIQUE NOT NULL,
    status ENUM('Pending', 'Active', 'Rejected') DEFAULT 'Pending',
    created_by INT,
    approved_by INT,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- ৫. এটি গ্রাহকের সঞ্চয় বা চলতি অ্যাকাউন্টের মূল তথ্য এবং বর্তমান ব্যালেন্স স্টোর করে।
-- প্রতিটি অ্যাকাউন্ট একটি নির্দিষ্ট শাখার অধীনে থাকে এবং ৫ ডিজিটের ইউনিক নম্বর ব্যবহার করে।
-- এটি মূলত সাব-লেজারের সারসংক্ষেপ যা কন্ট্রোল অ্যাকাউন্ট বা GL ২০০১ এর সাথে রিকনসিল করা হয়।
CREATE TABLE accounts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    customer_id INT NOT NULL,
    account_number VARCHAR(5) UNIQUE NOT NULL,
    account_type ENUM('111', '222') NOT NULL,
    balance DECIMAL(18, 2) DEFAULT 0.00,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (customer_id) REFERENCES customers(id)
);

-- ৬. প্রতিটি চেকারের কাছে থাকা নগদ টাকা বা ক্যাশ বক্সের বর্তমান ব্যালেন্স এখানে ট্র্যাক করা হয়।
-- এটি নিশ্চিত করে যে চেকার তার অনুমোদিত ক্যাশ লিমিটের বেশি লেনদেন করতে পারছেন কি না।
-- দিনের শেষে ফিজিক্যাল ক্যাশ কাউন্টিং এর সাথে এই টেবিলের ব্যালেন্স মিলিয়ে ক্যাশ-প্রুফ করা হয়।
CREATE TABLE cash_drawers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    checker_id INT UNIQUE,
    current_cash DECIMAL(18, 2) DEFAULT 0.00,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (checker_id) REFERENCES users(id)
);

-- ৭. চেকার যখন কোনো লেনদেন শুরু করেন, তখন তার বিস্তারিত তথ্য এই টেবিলে জমা হয়।
-- এটি মেকার-চেকার ওয়ার্কফ্লোর মূল কেন্দ্র যেখানে লেনদেনের স্ট্যাটাস (Initiated/Approved) থাকে।
-- মেকার অনুমোদন না করা পর্যন্ত এই টেবিলের তথ্য লেজার বা অ্যাকাউন্ট ব্যালেন্সে প্রভাব ফেলে না।
CREATE TABLE transactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    batch_number VARCHAR(20) UNIQUE NOT NULL,
    account_id INT NOT NULL,
    instrument_type ENUM('Cash', 'Cheque') NOT NULL,
    instrument_number TEXT,
    txn_type ENUM('Deposit', 'Withdraw') NOT NULL,
    amount DECIMAL(18, 2) NOT NULL,
    status ENUM('Initiated', 'Approved', 'Rejected') DEFAULT 'Initiated',
    checker_id INT NOT NULL,
    maker_id INT,
    remarks TEXT, -- কেন রিজেক্ট হলো বা কোনো বিশেষ নোট
    version_no INT DEFAULT 1, -- Concurrency/Race condition হ্যান্ডেল করার জন্য
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (account_id) REFERENCES accounts(id),
    FOREIGN KEY (checker_id) REFERENCES users(id),
    FOREIGN KEY (maker_id) REFERENCES users(id)
);

-- ৮. এটি কাস্টমার স্টেটমেন্ট তৈরির জন্য ব্যবহৃত সাব-লেজার পোস্টিং টেবিল।
-- অনুমোদিত প্রতিটি ট্রানজ্যাকশনের বিপরীতে এখানে ডেবিট/ক্রেডিট এবং আপডেট ব্যালেন্স সেভ হয়।
-- গ্রাহকের লেজার হিস্টোরি এবং শাখা ভিত্তিক সাব-লেজার রিপোর্টিং এখান থেকেই তৈরি হয়।
CREATE TABLE sub_ledger_entries (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    txn_id INT NOT NULL,
    account_id INT NOT NULL,
    dr_cr_flag ENUM('Dr', 'Cr') NOT NULL,
    amount DECIMAL(18, 2) NOT NULL,
    running_balance DECIMAL(18, 2) NOT NULL,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (txn_id) REFERENCES transactions(id)
);


-- ৯. এটি একটি লেনদেনের মাস্টার টেবিল, ডেবিট এবং ক্রেডিট এন্ট্রির মূল অভিভাবক (Parent)।
-- এটি নিশ্চিত করে যে প্রতি জোড়া Dr/Cr এন্ট্রির ব্যালেন্স ঠিক আছে। তাদের যোগফল সবসময় শূন্য (Zero) বা সমান হবে।
--যখন ১০০০ টাকা ডিপোজিট হবে:gl_journals-এ একটি এন্ট্রি হবে যেখানে total_debit = 1000 এবং total_credit = 1000 থাকবে।
CREATE TABLE gl_journals (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    txn_id INT NOT NULL, -- ট্রানজ্যাকশন টেবিলের সাথে লিংক
    branch_id INT NOT NULL,
    total_debit DECIMAL(18, 2),
    total_credit DECIMAL(18, 2),
    narration TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (txn_id) REFERENCES transactions(id),
    FOREIGN KEY (branch_id) REFERENCES branches(id)
);

-- ১০. এটি ডাবল-এন্ট্রি অ্যাকাউন্টিং এর মূল টেবিল যেখানে প্রতিটি লেনদেনের দুটি পক্ষ (Dr/Cr) থাকে।
-- এখানে প্রতিটি পোস্টিং সরাসরি একটি GL কোডের সাথে এবং একটি নির্দিষ্ট শাখার সাথে যুক্ত থাকে।
-- ট্রায়াল ব্যালেন্স এবং শাখা ভিত্তিক মূল আর্থিক স্টেটমেন্ট তৈরির জন্য এই টেবিলটি ব্যবহৃত হয়।
-- যখন ১০০০ টাকা ডিপোজিট হবে:gl_journal_lines-এ দুটি এন্ট্রি হবে:
                              -Cash GL (1001) এ ১০০০ টাকা ডেবিট।
                              -Customer Deposit GL (2001) এ ১০০০ টাকা ক্রেডিট।
CREATE TABLE gl_journal_lines (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    txn_id INT NOT NULL,
    gl_code_id INT NOT NULL, 
    debit_amount DECIMAL(18, 2) DEFAULT 0.00,
    credit_amount DECIMAL(18, 2) DEFAULT 0.00,
    narration TEXT,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (gl_code_id) REFERENCES gl_heads(id)
);

-- ১১. প্রতিটি শাখার জন্য GL ব্যালেন্স এবং সাব-লেজার ব্যালেন্সের মিল যাচাই করার রেকর্ড এখানে থাকে।
-- এটি অডিটরদের জন্য একটি ড্যাশবোর্ড হিসেবে কাজ করে যাতে কোনো শাখার ব্যালেন্সে গরমিল আছে কি না দেখা যায়।
-- রিকনসিলিয়েশন রান করার সময় সিস্টেম এখানে পার্থক্য (Difference) এবং স্ট্যাটাস রেকর্ড করে।
CREATE TABLE reconciliation_logs (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    recon_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    gl_code INT NOT NULL,
    gl_balance DECIMAL(18, 2) NOT NULL,
    sl_total_balance DECIMAL(18, 2) NOT NULL,
    difference DECIMAL(18, 2) NOT NULL,
    status ENUM('Matched', 'Mismatch') NOT NULL,
    FOREIGN KEY (branch_id) REFERENCES branches(id)
);

-- ১২. সিস্টেমের প্রতিটি সংবেদনশীল কার্যক্রম এবং শাখা ভিত্তিক অডিট ট্রেইল এখানে সংরক্ষিত হয়।
-- কোনো ডেটা পরিবর্তনের আগে কী ছিল এবং পরে কী হয়েছে তা ইউজারের তথ্যসহ এখানে জমা থাকে।
-- অডিটররা এটি ব্যবহার করে ব্যাংকিং ফ্রড বা অনিয়ম শনাক্ত করতে পারেন।
CREATE TABLE audit_logs (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT NOT NULL,
    user_id INT,
    action VARCHAR(100),
    old_value TEXT,
    new_value TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (branch_id) REFERENCES branches(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);


-- উদাহরণস্বরূপ শাখা ১-এর জন্য GL তৈরি
INSERT INTO gl_heads (branch_id, gl_code, gl_name, gl_type) VALUES (1, 1001, 'Cash In Hand', 'Asset');
INSERT INTO gl_heads (branch_id, gl_code, gl_name, gl_type) VALUES (1, 2001, 'Customer Deposits', 'Liability');




===========================================
            DATABASE 01 
============================================


### 1. Users Table

Fields:

- `user_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each user.
- `username` (VARCHAR(50)): The username for login.
- `email` (VARCHAR(100)): The user’s email address.
- `password_hash` (VARCHAR(255)): Hashed password for secure storage.
- `role` (ENUM('admin', 'checker', 'maker', 'auditor')): User’s role in the system.
- `full_name` (VARCHAR(100)): Full name of the user.
- `phone` (VARCHAR(20)): Contact number of the user.
- `address` (TEXT): Address of the user.
- `is_active` (BOOLEAN): Marks whether the user is active or deactivated.
- `created_at` (TIMESTAMP): Timestamp of user account creation.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি ব্যবহারকারী সম্পর্কিত তথ্য রাখে। 
এখানে প্রতিটি ব্যবহারকারীর জন্য একটি একক আইডি থাকবে যা তাদের লগইন এবং সিস্টেমে পরিচালনার জন্য ব্যবহার হবে। 
ব্যবহারকারীর ভূমিকা, নাম, ইমেইল, ফোন নম্বর, ঠিকানা, এবং সক্রিয় অবস্থা সংরক্ষণ করা হয়, যা তাদের সিস্টেমের সাথে সম্পর্কিত কাজ করার অনুমতি দেয়।

---

### 2. Customer Table

Fields:

- `customer_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each customer.
- `account_number` (VARCHAR(5)): The 5-digit unique account number generated by the system.
- `account_type` (ENUM('savings', 'current')): Type of account (savings or current).
- `customer_name` (VARCHAR(100)): Name of the customer.
- `created_at` (TIMESTAMP): Timestamp when the account is created.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি গ্রাহকের তথ্য সংরক্ষণ করে 
যেমন গ্রাহকের একাউন্ট নম্বর, একাউন্টের ধরণ (সেভিংস বা কারেন্ট), গ্রাহকের নাম এবং একাউন্ট তৈরি হওয়ার সময়ের তথ্য। 
এটি মূলত গ্রাহকের মৌলিক তথ্য হ্যান্ডলিং করে।

---

### 3. Transactions Table

Fields:

- `txn_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each transaction.
- `txn_type` (ENUM('deposit', 'withdrawal')): Type of transaction.
- `amount` (DECIMAL(10,2)): Amount for the transaction.
- `transaction_status` (ENUM('initiated', 'approved', 'posted', 'rejected')): Status of the transaction.
- `customer_id` (INT, Foreign Key to Customer Table): The customer involved in the transaction.
- `batch_number` (INT): Batch number for grouped transactions.
- `created_at` (TIMESTAMP): Timestamp of transaction creation.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি সব ধরনের লেনদেনের তথ্য রাখে (যেমন জমা বা উত্তোলন)। 
এর মাধ্যমে লেনদেনের প্রকার, পরিমাণ, অবস্থা এবং সংশ্লিষ্ট গ্রাহকের তথ্য সংরক্ষণ করা হয়। 
এটি লেনদেনের পুরো প্রক্রিয়া ট্র্যাক করতে সাহায্য করবে।

---

### 4. General Ledger (GL) Table

Fields:

- `gl_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each GL entry.
- `gl_account` (VARCHAR(50)): The name/ID of the general ledger account (e.g., Cash, Customer Deposits).
- `amount` (DECIMAL(10,2)): Amount for the ledger entry.
- `txn_id` (INT, Foreign Key to Transactions Table): The transaction linked to this ledger entry.
- `created_at` (TIMESTAMP): Timestamp when the entry was created.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি সাধারণ লেজারের (GL) জন্য ব্যবহৃত হবে যেখানে ব্যাংকের মূল হিসাবগুলো যেমন ক্যাশ (নগদ), গ্রাহক জমা (কাস্টমার ডিপোজিট) ইত্যাদি রাখা হবে। 
এতে লেনদেনের সাথে সম্পর্কিত GL এর অ্যাকাউন্ট এবং পরিমাণ থাকে।

---

### 5. Sub-Ledger Table

Fields:

- `subledger_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each sub-ledger entry.
- `subledger_account` (VARCHAR(50)): The name/ID of the sub-ledger account (e.g., Customer Ledger, Cash Drawer).
- `amount` (DECIMAL(10,2)): Amount for the sub-ledger entry.
- `txn_id` (INT, Foreign Key to Transactions Table): The transaction linked to this sub-ledger entry.
- `created_at` (TIMESTAMP): Timestamp when the entry was created.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি সাব-লেজারের (Sub-Ledger) জন্য ব্যবহৃত হবে যেখানে গ্রাহকের হিসাব বা ক্যাশ ড্রয়ারের মতো মাইক্রো হিসাব রাখা হবে। 
এটি সাব-লেজারের তথ্য পরিচালনা করবে যা মূল হিসাব থেকে বেশি বিস্তারিত থাকে।

---

### 6. Audit Logs Table

Fields:

- `audit_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each audit log entry.
- `user_id` (INT, Foreign Key to Users Table): The user who performed the action.
- `action` (VARCHAR(255)): Description of the action (e.g., "Created customer", "Approved transaction").
- `timestamp` (TIMESTAMP): Time when the action was performed.
- `details` (TEXT): Additional details of the action performed.

Explanation in Bangla:
এই টেবিলটি সিস্টেমে করা সব অ্যাকশনের রেকর্ড রাখে, যেমন কোন ব্যবহারকারী কোন কার্যক্রম করেছেন। 
এটি সিস্টেমের নিরাপত্তা এবং অডিটিং প্রক্রিয়ার জন্য গুরুত্বপূর্ণ, বিশেষ করে যদি কোন ভুল বা ত্রুটি ঘটে থাকে।

---

### 7. Suspense Account Table (Optional)

Fields:

- `suspense_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each suspense entry.
- `amount` (DECIMAL(10,2)): The amount in suspense.
- `txn_id` (INT, Foreign Key to Transactions Table): The transaction causing the suspense.
- `created_at` (TIMESTAMP): Timestamp when the suspense entry was created.
- `resolved` (BOOLEAN): Whether the suspense has been resolved or not.

Explanation in Bangla:
এই টেবিলটি সন্দেহজনক বা অসম্পূর্ণ লেনদেনের জন্য ব্যবহার করা হবে যা সাসপেন্স অ্যাকাউন্টে থাকবে। 
এটি সম্পূর্ণ হওয়ার পরে এর পরিমাণ এবং লেনদেনের বিস্তারিত সংশোধন করা হবে।

---

### 8. Reconciliation Reports Table

Fields:

- `report_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each reconciliation report.
- `report_type` (ENUM('Sub-ledger vs GL', 'Cash Proof', 'Trial Balance')): Type of the reconciliation report.
- `generated_at` (TIMESTAMP): Timestamp of when the report was generated.
- `details` (TEXT): Detailed summary of the reconciliation.

Explanation in Bangla:
এই টেবিলটি সিস্টেমের পুনঃপুনঃ পরীক্ষণের রিপোর্ট সংরক্ষণ করবে, 
যেমন সাব-লেজার বনাম GL রিপোর্ট, ক্যাশ প্রুফ রিপোর্ট এবং ট্রায়াল ব্যালান্স রিপোর্ট। 
এটি সিস্টেমের ফিনান্সিয়াল হেলথ পর্যবেক্ষণ করতে সাহায্য করবে।






---

