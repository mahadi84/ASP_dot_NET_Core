Date: 5 january 2026



### Total Number of Tables, their required fields


In total, I need 7 to 8 tables for the core structure of my banking application.

These tables are needed to ensure:
- User management and authentication.
- Transaction management with double entry accounting.
- Account management (both general and sub-ledgers).
- Security and audit trails.
- Ensuring financial consistency and reconciliation.




===========================================
              DATABASE 01 
===========================================

CREATE DATABASE CBS_DoubleEntry;
USE CBS_DoubleEntry;

-- ১. ব্যাংকের শাখাগুলোর তথ্য এবং মূল ভল্টের মোট ব্যালেন্স এখানে জমা থাকে।
-- এটি হেড অফিস বা ব্রাঞ্চ লেভেলে কত লিকুইড ক্যাশ আছে তা ট্র্যাক করতে ব্যবহৃত হয়।
CREATE TABLE branches (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_code VARCHAR(10) UNIQUE NOT NULL,
    branch_name VARCHAR(100) NOT NULL,
    vault_balance DECIMAL(18, 2) DEFAULT 0.00
);

-- ২. ব্যাংকের কর্মকর্তা বা ব্যবহারকারীদের তথ্য এবং তাদের রোল (Checker/Maker) এখানে থাকে।
-- এটি লগইন ম্যানেজমেন্ট এবং ব্রাঞ্চ ভিত্তিক ইউজার অ্যাক্সেস কন্ট্রোল নিশ্চিত করে।
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role ENUM('Admin', 'Maker', 'Checker', 'Auditor') NOT NULL,
    branch_id INT,
    is_active BOOLEAN DEFAULT TRUE,
    FOREIGN KEY (branch_id) REFERENCES branches(id)
);

-- ৩. চার্ট অফ অ্যাকাউন্টস বা মূল লেজার হেডগুলো (যেমন: ১০০১-ক্যাশ, ২০০১-ডিপোজিট) এখানে সংজ্ঞায়িত থাকে।
-- এটি ট্রায়াল ব্যালেন্স এবং ফিন্যান্সিয়াল স্টেটমেন্ট তৈরির প্রধান ভিত্তি।
CREATE TABLE gl_heads (
    gl_code INT PRIMARY KEY,
    gl_name VARCHAR(100) NOT NULL,
    gl_type ENUM('Asset', 'Liability', 'Equity', 'Income', 'Expense') NOT NULL
);

-- ৪. ব্যাংকের গ্রাহকদের ব্যক্তিগত পরিচিতি এবং তাদের বর্তমান স্ট্যাটাস এখানে সংরক্ষিত হয়।
-- চেকার গ্রাহক তৈরি করে এবং মেকার তা ভেরিফাই করে অনুমোদন করার আগ পর্যন্ত এটি পেন্ডিং থাকে।
CREATE TABLE customers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    full_name VARCHAR(100) NOT NULL,
    nid_number VARCHAR(20) UNIQUE NOT NULL,
    status ENUM('Pending', 'Active', 'Rejected') DEFAULT 'Pending',
    created_by INT,
    approved_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (created_by) REFERENCES users(id),
    FOREIGN KEY (approved_by) REFERENCES users(id)
);

-- ৫. গ্রাহকদের ৫-ডিজিটের অ্যাকাউন্ট নাম্বার এবং সঞ্চিত অর্থের ব্যালেন্স এখানে থাকে।
-- এটি মূলত সাব-লেজারের মূল অ্যাকাউন্ট যা কাস্টমার ডিপোজিট হেড (২০০১) এর সাথে রিকনসিল করা হয়।
CREATE TABLE accounts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    customer_id INT,
    account_number VARCHAR(5) UNIQUE NOT NULL, 
    account_type ENUM('111', '222') NOT NULL, -- 111=Savings, 222=Current
    balance DECIMAL(18, 2) DEFAULT 0.00,
    status ENUM('Active', 'Inactive') DEFAULT 'Active',
    FOREIGN KEY (customer_id) REFERENCES customers(id)
);

-- ৬. প্রতিজন চেকারের অধীনে থাকা বর্তমান ক্যাশ বা ড্রয়ার ব্যালেন্স রিয়েল-টাইমে এখানে আপডেট হয়।
-- দিনের শেষে ফিজিক্যাল ক্যাশ এবং এই ড্রয়ারের ব্যালেন্স মিলিয়ে ক্যাশ প্রুফ নিশ্চিত করা হয়।
CREATE TABLE cash_drawers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    checker_id INT UNIQUE,
    current_cash DECIMAL(18, 2) DEFAULT 0.00,
    FOREIGN KEY (checker_id) REFERENCES users(id)
);

-- ৭. প্রতিটি ডিপোজিট বা উইথড্র ট্রানজ্যাকশন এবং মেকার-চেকার এপ্রুভাল স্ট্যাটাস এখানে থাকে।
-- এখানে কোনো ট্রানজ্যাকশন এপ্রুভ না হওয়া পর্যন্ত ব্যালেন্স বা লেজারে কোনো পরিবর্তন ঘটে না।
CREATE TABLE transactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    batch_number VARCHAR(20) UNIQUE NOT NULL,
    account_id INT,
    txn_type ENUM('Deposit', 'Withdraw') NOT NULL,
    amount DECIMAL(18, 2) NOT NULL,
    instrument_type VARCHAR(20) DEFAULT 'Cash',
    status ENUM('Initiated', 'Approved', 'Rejected') DEFAULT 'Initiated',
    checker_id INT,
    maker_id INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (account_id) REFERENCES accounts(id),
    FOREIGN KEY (checker_id) REFERENCES users(id),
    FOREIGN KEY (maker_id) REFERENCES users(id)
);

-- ৮. এটি কাস্টমার লেজার এন্ট্রি টেবিল যেখান থেকে গ্রাহকের ব্যাংক স্টেটমেন্ট জেনারেট করা হয়।
-- অনুমোদিত প্রতিটি লেনদেনের জন্য এখানে ডেবিট অথবা ক্রেডিট এবং রানিং ব্যালেন্স রেকর্ড করা হয়।
CREATE TABLE sub_ledger_entries (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    txn_id INT,
    account_id INT,
    dr_cr_flag ENUM('Dr', 'Cr') NOT NULL,
    amount DECIMAL(18, 2) NOT NULL,
    running_balance DECIMAL(18, 2) NOT NULL,
    posting_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (txn_id) REFERENCES transactions(id),
    FOREIGN KEY (account_id) REFERENCES accounts(id)
);

-- ৯. ডাবল-এন্ট্রি অ্যাকাউন্টিং সিস্টেমের মূল ডায়েরি যেখানে ডেবিট ও ক্রেডিট লাইন স্টোর করা হয়।
-- এটি নিশ্চিত করে যে প্রতিটি লেনদেনে সমপরিমাণ টাকা ডেবিট ও ক্রেডিট হয়ে অ্যাকাউন্টিং ইকুয়েশন রক্ষা করেছে।
CREATE TABLE gl_journal_lines (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    txn_id INT,
    gl_code INT,
    debit_amount DECIMAL(18, 2) DEFAULT 0.00,
    credit_amount DECIMAL(18, 2) DEFAULT 0.00,
    narration TEXT,
    posting_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (txn_id) REFERENCES transactions(id),
    FOREIGN KEY (gl_code) REFERENCES gl_heads(gl_code)
);

-- ১০. সিস্টেমের যেকোনো পরিবর্তন বা স্পর্শকাতর অ্যাকশন ট্র্যাকিং এর জন্য অডিট ট্রেইল হিসেবে কাজ করে।
-- ডাটা এডিট বা ডিলিট করার আগে ও পরের মান (Old/New Value) অডিটরদের পর্যবেক্ষণের জন্য জমা থাকে।
CREATE TABLE audit_logs (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    action VARCHAR(100),
    table_name VARCHAR(50),
    record_id INT,
    old_value TEXT,
    new_value TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- ১১. জেনারেল লেজার (GL) এবং সাব-লেজার (SL) ব্যালেন্সের মধ্যে কোনো পার্থক্য আছে কি না তার ইতিহাস এখানে থাকে।
-- এটি অডিটরদের রিপোর্ট তৈরিতে সাহায্য করে এবং প্রতিদিনের ব্যালেন্স ম্যাচিং স্ট্যাটাস (Match/Mismatch) রেকর্ড করে।
CREATE TABLE reconciliation_logs (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    recon_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    gl_code INT,
    gl_balance DECIMAL(18, 2) NOT NULL, -- GL টেবিলের মোট ব্যালেন্স
    sl_total_balance DECIMAL(18, 2) NOT NULL, -- সাব-লেজার বা একাউন্টস টেবিলের মোট যোগফল
    difference DECIMAL(18, 2) NOT NULL, -- GL এবং SL এর মধ্যে পার্থক্য (ব্যালেন্স ০ হওয়া উচিত)
    status ENUM('Matched', 'Mismatch') NOT NULL,
    performed_by INT, -- কোন ইউজার বা অডিটর চেক করেছেন
    remarks TEXT, -- কোনো পার্থক্য থাকলে তার নোট বা কারণ
    FOREIGN KEY (gl_code) REFERENCES gl_heads(gl_code),
    FOREIGN KEY (performed_by) REFERENCES users(id)
);

-- প্রাথমিক সেটআপ ডেটা (ক্যাশ এবং কাস্টমার ডিপোজিট কন্ট্রোল হেড)
INSERT INTO gl_heads (gl_code, gl_name, gl_type) VALUES (1001, 'Cash In Hand', 'Asset');
INSERT INTO gl_heads (gl_code, gl_name, gl_type) VALUES (2001, 'Customer Deposits', 'Liability');




===========================================
            DATABASE 02 
============================================


### 1. Users Table

Fields:

- `user_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each user.
- `username` (VARCHAR(50)): The username for login.
- `email` (VARCHAR(100)): The user’s email address.
- `password_hash` (VARCHAR(255)): Hashed password for secure storage.
- `role` (ENUM('admin', 'checker', 'maker', 'auditor')): User’s role in the system.
- `full_name` (VARCHAR(100)): Full name of the user.
- `phone` (VARCHAR(20)): Contact number of the user.
- `address` (TEXT): Address of the user.
- `is_active` (BOOLEAN): Marks whether the user is active or deactivated.
- `created_at` (TIMESTAMP): Timestamp of user account creation.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি ব্যবহারকারী সম্পর্কিত তথ্য রাখে। 
এখানে প্রতিটি ব্যবহারকারীর জন্য একটি একক আইডি থাকবে যা তাদের লগইন এবং সিস্টেমে পরিচালনার জন্য ব্যবহার হবে। 
ব্যবহারকারীর ভূমিকা, নাম, ইমেইল, ফোন নম্বর, ঠিকানা, এবং সক্রিয় অবস্থা সংরক্ষণ করা হয়, যা তাদের সিস্টেমের সাথে সম্পর্কিত কাজ করার অনুমতি দেয়।

---

### 2. Customer Table

Fields:

- `customer_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each customer.
- `account_number` (VARCHAR(5)): The 5-digit unique account number generated by the system.
- `account_type` (ENUM('savings', 'current')): Type of account (savings or current).
- `customer_name` (VARCHAR(100)): Name of the customer.
- `created_at` (TIMESTAMP): Timestamp when the account is created.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি গ্রাহকের তথ্য সংরক্ষণ করে 
যেমন গ্রাহকের একাউন্ট নম্বর, একাউন্টের ধরণ (সেভিংস বা কারেন্ট), গ্রাহকের নাম এবং একাউন্ট তৈরি হওয়ার সময়ের তথ্য। 
এটি মূলত গ্রাহকের মৌলিক তথ্য হ্যান্ডলিং করে।

---

### 3. Transactions Table

Fields:

- `txn_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each transaction.
- `txn_type` (ENUM('deposit', 'withdrawal')): Type of transaction.
- `amount` (DECIMAL(10,2)): Amount for the transaction.
- `transaction_status` (ENUM('initiated', 'approved', 'posted', 'rejected')): Status of the transaction.
- `customer_id` (INT, Foreign Key to Customer Table): The customer involved in the transaction.
- `batch_number` (INT): Batch number for grouped transactions.
- `created_at` (TIMESTAMP): Timestamp of transaction creation.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি সব ধরনের লেনদেনের তথ্য রাখে (যেমন জমা বা উত্তোলন)। 
এর মাধ্যমে লেনদেনের প্রকার, পরিমাণ, অবস্থা এবং সংশ্লিষ্ট গ্রাহকের তথ্য সংরক্ষণ করা হয়। 
এটি লেনদেনের পুরো প্রক্রিয়া ট্র্যাক করতে সাহায্য করবে।

---

### 4. General Ledger (GL) Table

Fields:

- `gl_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each GL entry.
- `gl_account` (VARCHAR(50)): The name/ID of the general ledger account (e.g., Cash, Customer Deposits).
- `amount` (DECIMAL(10,2)): Amount for the ledger entry.
- `txn_id` (INT, Foreign Key to Transactions Table): The transaction linked to this ledger entry.
- `created_at` (TIMESTAMP): Timestamp when the entry was created.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি সাধারণ লেজারের (GL) জন্য ব্যবহৃত হবে যেখানে ব্যাংকের মূল হিসাবগুলো যেমন ক্যাশ (নগদ), গ্রাহক জমা (কাস্টমার ডিপোজিট) ইত্যাদি রাখা হবে। 
এতে লেনদেনের সাথে সম্পর্কিত GL এর অ্যাকাউন্ট এবং পরিমাণ থাকে।

---

### 5. Sub-Ledger Table

Fields:

- `subledger_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each sub-ledger entry.
- `subledger_account` (VARCHAR(50)): The name/ID of the sub-ledger account (e.g., Customer Ledger, Cash Drawer).
- `amount` (DECIMAL(10,2)): Amount for the sub-ledger entry.
- `txn_id` (INT, Foreign Key to Transactions Table): The transaction linked to this sub-ledger entry.
- `created_at` (TIMESTAMP): Timestamp when the entry was created.
- `updated_at` (TIMESTAMP): Timestamp of  account update.

Explanation in Bangla:
এই টেবিলটি সাব-লেজারের (Sub-Ledger) জন্য ব্যবহৃত হবে যেখানে গ্রাহকের হিসাব বা ক্যাশ ড্রয়ারের মতো মাইক্রো হিসাব রাখা হবে। 
এটি সাব-লেজারের তথ্য পরিচালনা করবে যা মূল হিসাব থেকে বেশি বিস্তারিত থাকে।

---

### 6. Audit Logs Table

Fields:

- `audit_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each audit log entry.
- `user_id` (INT, Foreign Key to Users Table): The user who performed the action.
- `action` (VARCHAR(255)): Description of the action (e.g., "Created customer", "Approved transaction").
- `timestamp` (TIMESTAMP): Time when the action was performed.
- `details` (TEXT): Additional details of the action performed.

Explanation in Bangla:
এই টেবিলটি সিস্টেমে করা সব অ্যাকশনের রেকর্ড রাখে, যেমন কোন ব্যবহারকারী কোন কার্যক্রম করেছেন। 
এটি সিস্টেমের নিরাপত্তা এবং অডিটিং প্রক্রিয়ার জন্য গুরুত্বপূর্ণ, বিশেষ করে যদি কোন ভুল বা ত্রুটি ঘটে থাকে।

---

### 7. Suspense Account Table (Optional)

Fields:

- `suspense_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each suspense entry.
- `amount` (DECIMAL(10,2)): The amount in suspense.
- `txn_id` (INT, Foreign Key to Transactions Table): The transaction causing the suspense.
- `created_at` (TIMESTAMP): Timestamp when the suspense entry was created.
- `resolved` (BOOLEAN): Whether the suspense has been resolved or not.

Explanation in Bangla:
এই টেবিলটি সন্দেহজনক বা অসম্পূর্ণ লেনদেনের জন্য ব্যবহার করা হবে যা সাসপেন্স অ্যাকাউন্টে থাকবে। 
এটি সম্পূর্ণ হওয়ার পরে এর পরিমাণ এবং লেনদেনের বিস্তারিত সংশোধন করা হবে।

---

### 8. Reconciliation Reports Table

Fields:

- `report_id` (Primary Key, INT, AUTO_INCREMENT): A unique identifier for each reconciliation report.
- `report_type` (ENUM('Sub-ledger vs GL', 'Cash Proof', 'Trial Balance')): Type of the reconciliation report.
- `generated_at` (TIMESTAMP): Timestamp of when the report was generated.
- `details` (TEXT): Detailed summary of the reconciliation.

Explanation in Bangla:
এই টেবিলটি সিস্টেমের পুনঃপুনঃ পরীক্ষণের রিপোর্ট সংরক্ষণ করবে, 
যেমন সাব-লেজার বনাম GL রিপোর্ট, ক্যাশ প্রুফ রিপোর্ট এবং ট্রায়াল ব্যালান্স রিপোর্ট। 
এটি সিস্টেমের ফিনান্সিয়াল হেলথ পর্যবেক্ষণ করতে সাহায্য করবে।






---

